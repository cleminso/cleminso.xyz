<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>TL;DR #001 – Intents; Braavos; Ekubo | TL;DR</title>
<meta name=keywords content="DeFi,Starknet,Layer 2"><meta name=description content="Intents aren’t real? Source from @DavideCrapis
What&rsquo;s action preference type? How many dimensions are implicated? what&rsquo;s measurable (max $)? ⇒ which risks?
What&rsquo;s a constraint type? satisfaction with risk and outcome?
Why we use the current system? for which outcome? what&rsquo;s your preference for this system? What&rsquo;s your current preference? How is measure the outcome? ($?)
=> We use the current system because we accept setting our own income and accept a range result for the outcome in $."><meta name=author content="cleminso"><link rel=canonical href=https://cleminso.xyz/tldr/001-intents_braavos_ekubo/><link crossorigin=anonymous href=/assets/css/stylesheet.e087fd1dc76e73a35ae6d7028ddc1ba41e0131e7f9b3a6e2d019a208e6d6c4b5.css integrity="sha256-4If9Hcduc6Na5tcCjdwbpB4BMef5s6bi0BmiCObWxLU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://cleminso.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://cleminso.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://cleminso.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://cleminso.xyz/apple-touch-icon.png><link rel=mask-icon href=https://cleminso.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="TL;DR #001 – Intents; Braavos; Ekubo"><meta property="og:description" content="Intents aren’t real? Source from @DavideCrapis
What&rsquo;s action preference type? How many dimensions are implicated? what&rsquo;s measurable (max $)? ⇒ which risks?
What&rsquo;s a constraint type? satisfaction with risk and outcome?
Why we use the current system? for which outcome? what&rsquo;s your preference for this system? What&rsquo;s your current preference? How is measure the outcome? ($?)
=> We use the current system because we accept setting our own income and accept a range result for the outcome in $."><meta property="og:type" content="article"><meta property="og:url" content="https://cleminso.xyz/tldr/001-intents_braavos_ekubo/"><meta property="article:section" content="TL;DR"><meta property="article:published_time" content="2023-10-12T10:02:06+02:00"><meta property="article:modified_time" content="2023-10-12T10:02:06+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="TL;DR #001 – Intents; Braavos; Ekubo"><meta name=twitter:description content="Intents aren’t real? Source from @DavideCrapis
What&rsquo;s action preference type? How many dimensions are implicated? what&rsquo;s measurable (max $)? ⇒ which risks?
What&rsquo;s a constraint type? satisfaction with risk and outcome?
Why we use the current system? for which outcome? what&rsquo;s your preference for this system? What&rsquo;s your current preference? How is measure the outcome? ($?)
=> We use the current system because we accept setting our own income and accept a range result for the outcome in $."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"TL;DR #001 – Intents; Braavos; Ekubo","item":"https://cleminso.xyz/tldr/001-intents_braavos_ekubo/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"TL;DR #001 – Intents; Braavos; Ekubo","name":"TL;DR #001 – Intents; Braavos; Ekubo","description":"Intents aren’t real? Source from @DavideCrapis\nWhat\u0026rsquo;s action preference type? How many dimensions are implicated? what\u0026rsquo;s measurable (max $)? ⇒ which risks?\nWhat\u0026rsquo;s a constraint type? satisfaction with risk and outcome?\nWhy we use the current system? for which outcome? what\u0026rsquo;s your preference for this system? What\u0026rsquo;s your current preference? How is measure the outcome? ($?)\n=\u0026gt; We use the current system because we accept setting our own income and accept a range result for the outcome in $.","keywords":["DeFi","Starknet","Layer 2"],"articleBody":"Intents aren’t real? Source from @DavideCrapis\nWhat’s action preference type? How many dimensions are implicated? what’s measurable (max $)? ⇒ which risks?\nWhat’s a constraint type? satisfaction with risk and outcome?\nWhy we use the current system? for which outcome? what’s your preference for this system? What’s your current preference? How is measure the outcome? ($?)\n=\u003e We use the current system because we accept setting our own income and accept a range result for the outcome in $.\nWith intent, the solver has to know my preference vector in order to do a good job. AGI raining possible about my history.\nWhat does this mean in practice?\n“Users and their preferences are real. Discovery is key if we want to go beyond a simple application. In the short term, standard tools, templates, and mechanism for solving specific classes of intent commitments are more important than dreams.”\nHow Braavos on Starknet is revolutionizing crypto signing Source\nFor context, public blockchains secp256k1 elliptic curve cryptographic signature schemes. But it’s not compatible with the cryptographic signature scheme available in mobile devices with Hardware Security Modules (HSM), such as the iPhones and Android (Pixel and other) phones.\nMobile devices use the curve secp256r1 (also called NIST-P256) and Starknet doesn’t support secp256r1, has its own proprietary curve, which is a STARK-friendly curve, and supports AA natively. ⇒ Braavos use it to introduce Hardware Signer\n→ Hardware Signer – 2 Main components\nThe secure sub-system in the user’s mobile device\nbuilt-in in the user’s device — the iPhone’s Secure Enclave or Android Phone’s Titan HSM to protect their account\nThere are dedicated and isolated sub-system, totally separated from the application processor, that can generate private keys and sign messages. Keys are generated by an internal True Random Number Generator and sign messages over the secp256r1 elliptic curve via its internal Public Key Accelerator.\nprivate keys never leave the secure system and are unknown or inaccessible to anyone, not even to the user, or to the application itself.\nThe account smart contract that can run arbitrary logic (=AA)\nThe client side (e.g. the application) that allows the user to review or sign transactions and send them to the chain.\nThe on-chain side — has an account smart contract that can run arbitrary logic; and in particular, in our case, run arbitrary signature verification logic.\n⇒ The application signs the transaction using the mobile device security module and then sends it to the account contract on-chain that can verify it. This means that even the actual approval to sign a transaction is done directly.\n→ Solutions\nBiometric – it supports intrinsically biometric authentication of the user identity\nRecovery – 2 Keys\nHardware Signer Keys → used to sign all transactions\nKey derived from the seed phrase → can only sign this one transaction “Request to remove Hardware Signer” with a 4 day delay in rejecting this request.\nThis means that if the device gets stolen, lost, or bricked, users will still be able to recover their account within 4 days. However, if their Seed Phrase gets stolen and an attacker issues a request to remove the Hardware Signer, the user will automatically (and repeatedly) get a notification on their mobile device and will be able to cancel the request and keep all the assets safe.\nEkubo From Ekubo documentation Gas Efficiency → Ekubo uses the “till” pattern and a singleton design to provide the cheapest trades against concentrated liquidity. Introduce here and describe here.\npools are managed in a single contract, making tx more cost-effective \u0026 minimizing the required token transfer And when do I swap against a pool or update my position?\ntoken transfers are deferred until the end of the transaction. Aggregators could save them in Ekubo for later, avoiding expensive token transfers altogether. ⇒ The result is that you can execute many actions across many pools and only make the minimum number of required token transfers.\nConcentrated liquidity → allows market makers to provide liquidity within a specified price range\neach LP choose the exact parameters of their positions = LP provider can restrict orders to a specific price range. Better-enhanced rates for swappers and LP allow them to use their liquidity efficiently.\nall position in a pool are aggregated from a swapper’s perspective\n⇒ swappers get better pricing because liquidity providers can leverage up within a price range, or earn yield on unused capital elsewhere.\nExtensions → allow third-party developers to permissionlessly create new kinds of pools on Ekubo\nintegrate into the same ecosystem of aggregators and interfaces built on top of Ekubo These pools can implement new features\noracles\norder types\nTWAMM\nWithdrawal fee → I pay a fee equal to the swap fee of the selected pool from your principal\nIt decreases as a percentage of liquidity as capital efficiency increases\nIt decreases as a percentage of principal + fees as fees are earned over time\nThus, the fee incentivizes all liquidity concentration, passive liquidity and low fees.\nTicks allow liquidity providers to set specific price points\nTick spacing optimizes the cost of swaps based on asset volatility.\nFlash accounting enables internal token balance management before actual transfers, saving on gas fees. Also, allow free flash loans within the Ekubo ecosystem.\n","wordCount":"870","inLanguage":"en","datePublished":"2023-10-12T10:02:06+02:00","dateModified":"2023-10-12T10:02:06+02:00","author":{"@type":"Person","name":"cleminso"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://cleminso.xyz/tldr/001-intents_braavos_ekubo/"},"publisher":{"@type":"Organization","name":"TL;DR","logo":{"@type":"ImageObject","url":"https://cleminso.xyz/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://cleminso.xyz/ accesskey=h title="TL;DR (Alt + H)">TL;DR</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://cleminso.xyz/product-review/ title="Product Review"><span>Product Review</span></a></li><li><a href=https://cleminso.xyz/tldr/ title=TL;DR><span>TL;DR</span></a></li><li><a href=https://cleminso.xyz/definitions/ title=Definitions><span>Definitions</span></a></li><li><a href=https://cleminso.xyz/open-letter/ title="Open Letter"><span>Open Letter</span></a></li><li><a href=https://cleminso.xyz/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://cleminso.xyz/now/ title=Now><span>Now</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cleminso.xyz/>Home</a></div><h1 class="post-title entry-hint-parent">TL;DR #001 – Intents; Braavos; Ekubo</h1><div class=post-meta><span title='2023-10-12 10:02:06 +0200 CEST'>October 12, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;870 words&nbsp;·&nbsp;cleminso</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#intents-arent-real aria-label="Intents aren’t real?">Intents aren’t real?</a><ul><li><a href=#how-braavos-on-starknet-is-revolutionizing-crypto-signing aria-label="How Braavos on Starknet is revolutionizing crypto signing">How Braavos on Starknet is revolutionizing crypto signing</a></li><li><a href=#ekubo aria-label=Ekubo>Ekubo</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=intents-arent-real>Intents aren’t real?<a hidden class=anchor aria-hidden=true href=#intents-arent-real>#</a></h2><p><a href=https://twitter.com/DavideCrapis/status/1684685723742715904>Source</a> from <a href=https://twitter.com/DavideCrapis>@DavideCrapis</a></p><ul><li><p>What&rsquo;s action preference type? How many dimensions are implicated? what&rsquo;s measurable (max $)? ⇒ which risks?</p></li><li><p>What&rsquo;s a constraint type? satisfaction with risk and outcome?</p></li><li><p>Why we use the current system? for which outcome? what&rsquo;s your preference for this system? What&rsquo;s your current preference? How is measure the outcome? ($?)</p></li></ul><p>=> We use the current system because we accept setting our own income and accept a range result for the outcome in $.</p><ul><li><p>With intent, the solver has to know my preference vector in order to do a good job. <a href=https://actualiteinformatique.fr/intelligence-artificielle/definition-artificial-general-intelligence-agi>AGI</a> raining possible about my history.</p></li><li><p>What does this mean in practice?</p></li></ul><p>&ldquo;<em>Users and their preferences are real. Discovery is key if we want to go beyond a simple application. In the short term, standard tools, templates, and mechanism for solving specific classes of intent commitments are more important than dreams.</em>&rdquo;</p><hr><h3 id=how-braavos-on-starknet-is-revolutionizing-crypto-signing>How Braavos on Starknet is revolutionizing crypto signing<a hidden class=anchor aria-hidden=true href=#how-braavos-on-starknet-is-revolutionizing-crypto-signing>#</a></h3><p><a href=https://starkware.medium.com/how-starknet-is-revolutionizing-crypto-signing-ba3724077a79>Source</a></p><p>For context, public blockchains <strong>secp256k1 elliptic curve</strong> cryptographic signature schemes. But it&rsquo;s <strong>not compatible</strong> with the cryptographic signature scheme available in mobile devices with Hardware Security Modules (HSM), such as the iPhones and Android (Pixel and other) phones.</p><p>Mobile devices use the curve secp256r1 (also called NIST-P256) and Starknet doesn&rsquo;t support secp256r1, has its own proprietary curve, which is a STARK-friendly curve, and supports AA natively.
⇒ Braavos use it to introduce Hardware Signer</p><p><strong>→ Hardware Signer – 2 Main components</strong></p><ul><li><p>The secure sub-system in the user&rsquo;s mobile device</p><ul><li><p>built-in in the user&rsquo;s device — the iPhone’s <strong>Secure Enclave</strong> or Android Phone’s <strong>Titan HSM</strong> to protect their account</p></li><li><p>There are dedicated and isolated sub-system, totally separated from the application processor, that can generate private keys and sign messages. <strong>Keys are generated</strong> by an internal True Random Number Generator and <strong>sign messages</strong> over the secp256r1 elliptic curve via its internal Public Key Accelerator.</p></li><li><p><strong>private keys never leave the secure system and are unknown or inaccessible to anyone, not even to the user, or to the application itself.</strong></p></li></ul></li><li><p>The account smart contract that can run arbitrary logic (=AA)</p><ul><li><p>The <strong>client side</strong> (e.g. the application) that allows the user to review or sign transactions and send them to the chain.</p></li><li><p>The <strong>on-chain side</strong> — has an account smart contract that can run arbitrary logic; and in particular, in our case, run arbitrary signature <strong>verification</strong> logic.</p></li></ul></li></ul><p>⇒ The application signs the transaction using the mobile device security module and then sends it to the account contract on-chain that can verify it. This means that even the actual approval to sign a transaction is done directly.</p><p><strong>→ Solutions</strong></p><ul><li><p><strong>Biometric</strong> – it supports intrinsically biometric authentication of the user identity</p></li><li><p><strong>Recovery</strong> – 2 Keys</p><ul><li><p><strong>Hardware Signer Keys</strong> → used to sign all transactions</p></li><li><p><strong>Key derived from the seed phrase</strong> → can only sign this one transaction &ldquo;Request to remove Hardware Signer” with a 4 day delay in rejecting this request.</p></li><li><p><em>This means that if the device gets stolen, lost, or bricked, users will still be able to recover their account within 4 days. However, if their Seed Phrase gets stolen and an attacker issues a request to remove the Hardware Signer, the user will automatically (and repeatedly) get a notification on their mobile device and will be able to cancel the request and keep all the assets safe.</em></p></li></ul></li></ul><hr><h3 id=ekubo>Ekubo<a hidden class=anchor aria-hidden=true href=#ekubo>#</a></h3><p><a href=https://docs.ekubo.org/about-ekubo/introduction>From Ekubo documentation</a></p><p><strong>Gas Efficiency</strong> → Ekubo uses the <a href=https://docs.ekubo.org/integration-guides/till-pattern>&ldquo;till&rdquo; pattern</a> and a singleton design to provide the cheapest trades against concentrated liquidity. Introduce <a href="https://www.youtube.com/watch?v=xFp8RlRq0qU">here</a> and describe <a href=https://github.com/OpenZeppelin/openzeppelin-contracts/issues/4361#issuecomment-1595095135>here</a>.</p><ul><li>pools are managed in a single contract, making tx more cost-effective & minimizing the required token transfer</li></ul><p><em>And when do I <strong>swap against</strong> a pool or <strong>update</strong> my position?</em></p><ul><li>token transfers are deferred until the end of the transaction. Aggregators could save them in Ekubo for later, avoiding expensive token transfers altogether.</li></ul><p>⇒ The result is that you can <strong>execute many actions across many pools</strong> and only make the minimum number of required token transfers.</p><p><strong>Concentrated liquidity</strong> → allows market makers to <a href=https://docs.ekubo.org/user-guides/add-liquidity>provide liquidity</a> within a specified price range</p><ul><li><p>each LP choose the exact parameters of their positions = LP provider can restrict orders to a specific price range. Better-enhanced rates for swappers and LP allow them to use their liquidity efficiently.</p></li><li><p>all position in a pool are aggregated from a swapper’s perspective</p><p>⇒ swappers get better pricing because liquidity providers can leverage up within a price range, or earn yield on unused capital elsewhere.</p></li></ul><p><a href=https://docs.ekubo.org/integration-guides/extensions>Extensions</a> → allow third-party developers to permissionlessly create new kinds of pools on Ekubo</p><ul><li>integrate into the same ecosystem of aggregators and interfaces built on top of Ekubo</li></ul><p>These pools can implement new features</p><ul><li><p>oracles</p></li><li><p>order types</p></li><li><p>TWAMM</p></li></ul><p><strong>Withdrawal fee</strong> → I pay a fee equal to the swap fee of the selected pool from your principal</p><p>It <em>decreases</em> as a percentage of <em>liquidity</em> as capital efficiency increases</p><p>It <em>decreases</em> as a percentage of principal + fees as fees are earned over time</p><p>Thus, the fee incentivizes all liquidity concentration, passive liquidity and low fees.</p><p>Ticks allow liquidity providers to set specific price points</p><p>Tick spacing optimizes the cost of swaps based on asset volatility.</p><p><strong>Flash accounting</strong> enables internal token balance management before actual transfers, saving on gas fees. Also, allow free flash loans within the Ekubo ecosystem.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://cleminso.xyz/tags/defi/>DeFi</a></li><li><a href=https://cleminso.xyz/tags/starknet/>Starknet</a></li><li><a href=https://cleminso.xyz/tags/layer-2/>Layer 2</a></li></ul></footer></article></main><footer class=footer><span>© 2023 cleminso.eth |</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>